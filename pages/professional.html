<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="../css/com_topnav.css" />
    <link rel="stylesheet" type="text/css" href="../css/professional_styles.css" />
    <script>

        function allowDrop(ev) { //allows the drop event to take place, overrides the default value
          ev.preventDefault(); 
        }

        function allowDropGarbage(ev) {
          ev.preventDefault();
          const garbage_div = document.getElementById("garbage_div");
          garbage_div.style.backgroundImage = "url('/images/garbage_open.png')"; //opens the garbage can
        }
        
        function drag(ev) { //attaches data to the drag event
          ev.dataTransfer.setData("text", ev.target.id + ',' + ev.target.parentElement.id ); 
        }
        
        function dropShift(ev) { 
          ev.preventDefault();
          const data = ev.dataTransfer.getData("text").split(','); // (child num  ,  parent num)
          ev.target.parentElement.appendChild(document.getElementById(data[0]));
          const fromContainer_Num = data[1].substr(-1, 1);
          const toContainer_Num = String(ev.target.parentElement.id).substr(-1,1);
          if (fromContainer_Num > toContainer_Num) {
            //shift down
            for (let i = fromContainer_Num; i > toContainer_Num; i--) {
                let container = document.getElementById("div" + i);
                let contentAbove = document.getElementById("div" + (i-1)).firstElementChild;
                container.appendChild(contentAbove);
            }
          } else {
            //shift up
            for (let i = fromContainer_Num; i < toContainer_Num; i++) {
                let x = Number(i) + 1;
                let container = document.getElementById("div" + i);
                let contentBelow = document.getElementById("div" + (x)).firstElementChild;
                container.appendChild(contentBelow);
            }
          }
        }

        function dropDelete(ev) {
          ev.preventDefault();
          const dragdrop_div = document.getElementById("dragdrop_container");
          const data = ev.dataTransfer.getData("text").split(',');
          const fromContainer_Num = data[1].substr(-1, 1);
          const fromContainer_Ele = document.getElementById("div" + fromContainer_Num)
          fromContainer_Ele.removeChild(fromContainer_Ele.lastElementChild);
          const numOfContainers = dragdrop_div.childElementCount;
          for (let i = fromContainer_Num; i < numOfContainers; i++) {
                let x = Number(i) + 1;
                let container = document.getElementById("div" + i);
                let contentBelow = document.getElementById("div" + (x)).firstElementChild;
                container.appendChild(contentBelow);
            }
            dragdrop_div.removeChild(dragdrop_div.lastElementChild);
            ev.target.style.backgroundImage = null;
        }
        </script>
    <title>Joseph Heaton - Professional</title>
</head>
<body>
    <div id="topnav_container">
        <a href="/index.html" class="navlink" id="lang0">Home</a>
        <div id="search_container">
            <label id="lang2">Search</label>
            <div id="topnav_links_container">
                <a href="/" id="lang22" class="navlink">About me</a>
                <a href="/pages/gallery.html" id="lang4" class="navlink">Photos</a>
                <a href="/" id="lang6" class="navlink">Professional</a>
                <a href="/" id="lang8" class="navlink">Projects</a>
                <a href="/" id="lang10" class="navlink">Misc</a>
            </div>
        </div>
    </div>
    <div id="main_content">
        <div id="dragdrop_container">
            <div class="container" id="div1">
                <div class="content" id="drag1" ondrop="dropShift(event)" ondragover="allowDrop(event)" draggable="true" ondragstart="drag(event)">1</div>
            </div>
            <div class="container" id="div2">
                <div class="content" id="drag2" ondrop="dropShift(event)" ondragover="allowDrop(event)" draggable="true" ondragstart="drag(event)">2</div>
            </div>
            <div class="container" id="div3">
                <div class="content" id="drag3" ondrop="dropShift(event)" ondragover="allowDrop(event)" draggable="true" ondragstart="drag(event)">3</div>
            </div>
            <div class="container" id="div4">
                <div class="content" id="drag4" ondrop="dropShift(event)" ondragover="allowDrop(event)" draggable="true" ondragstart="drag(event)">4</div>
            </div>
            <div class="container" id="div5">
                <div class="content" id="drag5" ondrop="dropShift(event)" ondragover="allowDrop(event)" draggable="true" ondragstart="drag(event)">5</div>
            </div>
            <div class="container" id="div6">
                <div class="content" id="drag6" ondrop="dropShift(event)" ondragover="allowDrop(event)" draggable="true" ondragstart="drag(event)">6</div>
            </div>
        </div>
        <div id="garbage_div" ondrop="dropDelete(event)" ondragover="allowDropGarbage(event)"></div>
    </div>
</body>
</html>